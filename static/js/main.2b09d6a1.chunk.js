(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,l){e.exports=l(13)},,,,,,function(e,t,l){},function(e,t,l){},function(e,t,l){"use strict";l.r(t);var n=l(0),a=l.n(n),c=l(4),r=l.n(c),i=(l(11),l(2)),s=l(1);l(12);var o=function(e){var t=a.a.createRef(),l=Object(n.useState)(0),c=Object(i.a)(l,2),r=c[0],o=c[1];Object(n.useEffect)(function(){console.log(e.data.length,e.fills.length,r,"hook"),0!=e.data.length&&0!=e.fills.length&&0==r&&u()});var u=function(){var l=s.d(t.current);console.log(l,t);var n=e.data,a=e.fills,c=s.c().key(function(e){return e}).rollup(function(e){return e.length}).entries(a).sort(function(e,t){return s.b(e.value,t.value)}),r=c.slice(0,7).map(function(e){return e.key});c.slice(8).map(function(e){return e.key}),n.forEach(function(e){e.mod_fill_1=r.includes(e.fill_1)?e.fill_1:"Other",e.mod_fill_2=r.includes(e.fill_2)?e.fill_2:"Other"}),(r=r.filter(function(e){return"None"!=e})).push("Other");var i=[],u=l.append("g").attr("class","lines"),d=l.append("g").attr("class","texts");r.forEach(function(e,t){var a=0;l.append("text").attr("x",20*a).attr("y",40*t+25).text(e).classed(e,!0);for(var c=function(){var l=r[s];a++;var c=n.filter(function(t){return t.mod_fill_1==e&&t.mod_fill_2==l||t.mod_fill_1==e&&"None"==t.mod_fill_2&&e==l}),o=n.filter(function(t){return t.mod_fill_2==e&&t.mod_fill_1==l&&e!=l});d.append("circle").attr("r",function(e){return c.length+o.length>0?8:0}).attr("cx",20*a+100+5).attr("cy",20*t+20*s+25-5).classed(e,!0).classed(l,!0),d.append("text").attr("x",20*a+100+5).attr("y",20*t+20*s+25).text(function(){return c.length+o.length>0?c.length+o.length:""}).classed("row_"+e,!0).classed("col_"+l,!0),i.push({fill_1:e,fill_2:l,count:c.length+o.length})},s=t;s<=r.length-1;s++)c();u.append("line").attr("x1",125).attr("y1",40*t+20).attr("x2",20*a+125-15-5).attr("y2",20*t+20*s-5+5).attr("stroke","green").attr("class",e),u.append("line").attr("x1",125).attr("y1",40*t+20).attr("x2",20*t+125).attr("y2",40*t+20-20*(7-a)).attr("stroke","blue").attr("class",e)}),r.forEach(function(t,n){console.log(t),l.selectAll("text."+t).on("mouseover",function(){var t=s.d(this).attr("class");e.selectedFill(t),l.selectAll("text").classed("hovered",!1),s.d(this).classed("hovered",!0),l.selectAll("text.col_"+t).classed("hovered",!0),l.selectAll("text.row_"+t).classed("hovered",!0),u.selectAll("line").classed("hovered",!1),u.selectAll("line."+t).classed("hovered",!0),d.selectAll("circle").classed("hovered",!1),d.selectAll("circle."+t).classed("hovered",!0)}).on("mouseout",function(){e.selectedFill("none"),l.selectAll("text").classed("hovered",!1),u.selectAll("line").classed("hovered",!1),d.selectAll("circle").classed("hovered",!1)})}),o(1)};return a.a.createElement("div",{className:"triangle"},a.a.createElement("h3",null,"Filling filter"),a.a.createElement("svg",{ref:t,width:260,height:300}))};var u=function(){var e=a.a.createRef(),t=Object(n.useState)([]),l=Object(i.a)(t,2),c=l[0],r=l[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),f=d[0],m=d[1],h=Object(n.useState)("none"),p=Object(i.a)(h,2),v=p[0],_=p[1];Object(n.useEffect)(function(){s.a("https://docs.google.com/spreadsheets/d/e/2PACX-1vTT_w_1rgvRuiIkhgZ7GGjhWdxNTY2zuFEsuT7AtK80ryUlPZMN96ROjIljXTAewLEm6CClM5HwIiFv/pub?gid=0&single=true&output=csv").then(function(e){var t=[],l=s.g("%Y-%m-%d"),n=e.map(function(e,n){var a=""!=e["primary filling"]?e["primary filling"].replace(" ","_"):"None",c=""!=e["secondary filling"]?e["secondary filling"].replace(" ","_"):"None";return t.push(a),t.push(c),{id:n,name:e.Pie,date:l(e["Date served"]),alec:e["alec will eat it"],crust:e["one-crust"]&&!e["two crust"]?1:2,fill_1:a,fill_2:c}}),a=s.c().key(function(e){return e}).rollup(function(e){return e.length}).entries(t).sort(function(e,t){return s.b(e.value,t.value)}).slice(0,7).map(function(e){return e.key});n.forEach(function(e){e.mod_fill_1=a.includes(e.fill_1)?e.fill_1:"Other",e.mod_fill_2=a.includes(e.fill_2)?e.fill_2:"Other"}),r(n),m(t)})},[]),Object(n.useEffect)(function(){g(c)}),Object(n.useEffect)(function(){"none"===v?s.e("span.pie").classed("activeItem",!0).classed("unactiveItem",!1):(s.e("span.pie").classed("unactiveItem",!0),s.e("span.pie."+v).classed("unactiveItem",!1))});var g=function(t){var l=s.d(e.current),n=s.f("%Y %B"),a=s.c().key(function(e){return n(e.date)}).entries(t),c=l.selectAll("div").data(a).enter().append("div");c.append("div").classed("month_name",!0).text(function(e){return s.f("%Y %B")(s.g("%Y %B")(e.key))}),c.selectAll("div.pie").data(function(e){return e.values}).enter().append("span").classed("pie",!0).text(function(e){return e.name}).attr("class",function(e){return"pie "+e.fill_1+" "+e.fill_2+" "+e.mod_fill_1+" "+e.mod_fill_2+" "+y(e.fill_1,e.fill_2)}).on("mouseover",function(e){s.d("#root").append("div").classed("tooltip",!0).html("crust: "+e.crust+"<br>alec: "+e.alec+"<br>fill 1: "+e.fill_1+"<br>fill 2: "+e.fill_2+"<br>").style("left",s.d(this).node().getBoundingClientRect().left+"px").style("top",s.d(this).node().getBoundingClientRect().top+20+"px")}).on("mouseout",function(e){s.d("#root .tooltip").remove()})},y=function(e,t){return e===v||t===v?"activeItem":"unactiveItem"};return a.a.createElement("div",null,a.a.createElement("div",{className:"left_side"},a.a.createElement("div",{className:"sticky_top"},a.a.createElement("h1",null,"The Pie Chart"),a.a.createElement("h2",null,"The pies proudly eaten by the Stamen team"),a.a.createElement(o,{data:c,fills:f,selectedFill:function(e){_(e)}})),a.a.createElement("div",{className:"unsticky"}),a.a.createElement("div",{className:"sticky_bottom"},a.a.createElement("div",{className:"footer"},"Made by ",a.a.createElement("a",{href:"https://kmpny.github.io"},"Kompany"),", ",a.a.createElement("a",{href:"https://docs.google.com/spreadsheets/d/1npXQKNySYcRpiwp3-Iug3ncmCUS9F813LoxZQzSbVLU/edit#gid=0"},"data")," collected by ",a.a.createElement("a",{href:"https://stamen.com"},"Stamen")))),a.a.createElement("div",{className:"right_side"},a.a.createElement("div",{className:"pies",ref:e})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[5,1,2]]]);
//# sourceMappingURL=main.2b09d6a1.chunk.js.map