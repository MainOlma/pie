(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,n){e.exports=n.p+"static/media/pie.8ee147df.png"},,,function(e,t,n){e.exports=n(62)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){var a={"./Bird's Nest Pudding Pie.png":15,"./Blackberry.png":16,"./Blueberry Cherry.png":17,"./Blueberry Pear Crumble.png":18,"./Buttermilk.png":19,"./Captain Crunch.png":20,"./Carrot Meringue.png":21,"./Carrot.png":22,"./Cast Iron Apple Pie.png":23,"./Chez Panisse Lemon Meringe.png":24,"./Chocolate Avocado.png":25,"./Chocolate Peanut Butter.png":26,"./Chocolate Peanut Pie Mashup.png":27,"./Chocolate Peanut Tart.png":28,"./Coconut Cream.png":29,"./Coffee Chess.png":30,"./Corn Cardamom Custard.png":31,"./Crack Pie.png":32,"./Eggnog custard.png":33,"./Five berry pie.png":34,"./Freedom Pie.png":35,"./Gluten-free Blackberry.png":36,"./Key Lime Raspberry.png":37,"./Lemon Ice Box.png":38,"./Marie Calendar's Pot Pies.png":39,"./Mixed berry.png":40,"./Nectarine-Raspberry.png":41,"./Orange Meringue.png":42,"./Pear Ginger.png":43,"./Piecaken.png":44,"./Pumpkin Pecan.png":45,"./Raspberry Blueberry.png":46,"./Raw Pumpkin.png":47,"./Ruffled MIlk Pie.png":48,"./Salted Honey II.png":49,"./Salted Honey.png":50,"./Samoa II.png":51,"./Samoa.png":52,"./Shoofly.png":53,"./Strawberry Basil.png":54,"./Strawberry Rhubarb.png":55,"./Strawberry pie.png":56,"./Virginia Peanut Pie.png":57,"./Walgreens Pie.png":58,"./White Peach.png":59,"./Yellow Peach-1.png":60,"./Yellow Peach.png":61,"./pie.png":3};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=14},function(e,t,n){e.exports=n.p+"static/media/Bird's Nest Pudding Pie.02a83a39.png"},function(e,t,n){e.exports=n.p+"static/media/Blackberry.da58b568.png"},function(e,t,n){e.exports=n.p+"static/media/Blueberry Cherry.84e089d5.png"},function(e,t,n){e.exports=n.p+"static/media/Blueberry Pear Crumble.0a265269.png"},function(e,t,n){e.exports=n.p+"static/media/Buttermilk.6f3a6c41.png"},function(e,t,n){e.exports=n.p+"static/media/Captain Crunch.5b69057d.png"},function(e,t,n){e.exports=n.p+"static/media/Carrot Meringue.1680a56b.png"},function(e,t,n){e.exports=n.p+"static/media/Carrot.d55b1dc5.png"},function(e,t,n){e.exports=n.p+"static/media/Cast Iron Apple Pie.975a5643.png"},function(e,t,n){e.exports=n.p+"static/media/Chez Panisse Lemon Meringe.0d211018.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Avocado.197ef43b.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Peanut Butter.f8e2d9bd.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Peanut Pie Mashup.b1531258.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Peanut Tart.862e8d7a.png"},function(e,t,n){e.exports=n.p+"static/media/Coconut Cream.32ccf3b3.png"},function(e,t,n){e.exports=n.p+"static/media/Coffee Chess.8fa3e68a.png"},function(e,t,n){e.exports=n.p+"static/media/Corn Cardamom Custard.ce2a09c8.png"},function(e,t,n){e.exports=n.p+"static/media/Crack Pie.97cb328b.png"},function(e,t,n){e.exports=n.p+"static/media/Eggnog custard.e9bf9636.png"},function(e,t,n){e.exports=n.p+"static/media/Five berry pie.39c2ae2c.png"},function(e,t,n){e.exports=n.p+"static/media/Freedom Pie.f33fcbba.png"},function(e,t,n){e.exports=n.p+"static/media/Gluten-free Blackberry.12c8028a.png"},function(e,t,n){e.exports=n.p+"static/media/Key Lime Raspberry.1681c63b.png"},function(e,t,n){e.exports=n.p+"static/media/Lemon Ice Box.a7aad4f6.png"},function(e,t,n){e.exports=n.p+"static/media/Marie Calendar's Pot Pies.f64636af.png"},function(e,t,n){e.exports=n.p+"static/media/Mixed berry.5f32e9de.png"},function(e,t,n){e.exports=n.p+"static/media/Nectarine-Raspberry.9f1d4643.png"},function(e,t,n){e.exports=n.p+"static/media/Orange Meringue.3cc4f99a.png"},function(e,t,n){e.exports=n.p+"static/media/Pear Ginger.d204c8c0.png"},function(e,t,n){e.exports=n.p+"static/media/Piecaken.c567b9e2.png"},function(e,t,n){e.exports=n.p+"static/media/Pumpkin Pecan.e76dead1.png"},function(e,t,n){e.exports=n.p+"static/media/Raspberry Blueberry.6bb14ce7.png"},function(e,t,n){e.exports=n.p+"static/media/Raw Pumpkin.2a6e40c8.png"},function(e,t,n){e.exports=n.p+"static/media/Ruffled MIlk Pie.16e9b151.png"},function(e,t,n){e.exports=n.p+"static/media/Salted Honey II.aca6aefc.png"},function(e,t,n){e.exports=n.p+"static/media/Salted Honey.c9b0a076.png"},function(e,t,n){e.exports=n.p+"static/media/Samoa II.dc5320fe.png"},function(e,t,n){e.exports=n.p+"static/media/Samoa.dc5320fe.png"},function(e,t,n){e.exports=n.p+"static/media/Shoofly.4dd45894.png"},function(e,t,n){e.exports=n.p+"static/media/Strawberry Basil.9182bc67.png"},function(e,t,n){e.exports=n.p+"static/media/Strawberry Rhubarb.4cb32af9.png"},function(e,t,n){e.exports=n.p+"static/media/Strawberry pie.79788278.png"},function(e,t,n){e.exports=n.p+"static/media/Virginia Peanut Pie.3a282b17.png"},function(e,t,n){e.exports=n.p+"static/media/Walgreens Pie.05611736.png"},function(e,t,n){e.exports=n.p+"static/media/White Peach.e7e43d5d.png"},function(e,t,n){e.exports=n.p+"static/media/Yellow Peach-1.2e324eb6.png"},function(e,t,n){e.exports=n.p+"static/media/Yellow Peach.8688657d.png"},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(5),c=n.n(r),o=(n(12),n(2)),l=n(1),s=(n(13),n(3)),p=n.n(s);var d=function(e){var t=i.a.createRef(),n=Object(a.useState)(0),r=Object(o.a)(n,2),c=r[0],s=r[1];Object(a.useEffect)(function(){console.log(e.data.length,e.fills.length,c,"hook"),0!=e.data.length&&0!=e.fills.length&&0==c&&p()});var p=function(){var n=l.d(t.current);console.log(n,t);var a=e.data,i=e.fills,r=l.c().key(function(e){return e}).rollup(function(e){return e.length}).entries(i).sort(function(e,t){return l.b(e.value,t.value)}),c=r.slice(0,7).map(function(e){return e.key});r.slice(8).map(function(e){return e.key}),a.forEach(function(e){e.mod_fill_1=c.includes(e.fill_1)?e.fill_1:"Other",e.mod_fill_2=c.includes(e.fill_2)?e.fill_2:"Other"}),(c=c.filter(function(e){return"None"!=e})).push("Other");var o=[],p=n.append("g").attr("class","lines"),d=n.append("g").attr("class","texts");c.forEach(function(t,i){var r=0;n.append("text").attr("x",20*r).attr("y",40*i+25).text(t).classed(t,!0);for(var l=function(){var n=c[s];r++;var l=a.filter(function(e){return e.mod_fill_1==t&&e.mod_fill_2==n||e.mod_fill_1==t&&"None"==e.mod_fill_2&&t==n}),p=a.filter(function(e){return e.mod_fill_2==t&&e.mod_fill_1==n&&t!=n});d.append("circle").attr("r",function(e){return l.length+p.length>0?8:0}).attr("cx",20*r+100+5).attr("cy",20*i+20*s+25-5).classed(t,!0).classed(n,!0).on("mouseover",function(){e.selectedFill({f1:t,f2:n})}).on("mouseout",function(){e.selectedFill({f1:"none",f2:"none"})}),d.append("text").attr("x",20*r+100+5).attr("y",20*i+20*s+25).text(function(){return l.length+p.length>0?l.length+p.length:""}).classed("row_"+t,!0).classed("col_"+n,!0).attr("pointer-events","none"),o.push({fill_1:t,fill_2:n,count:l.length+p.length})},s=i;s<=c.length-1;s++)l();p.append("line").attr("x1",125).attr("y1",40*i+20).attr("x2",20*r+125-15-5).attr("y2",20*i+20*s-5+5).attr("stroke","green").attr("class",t),p.append("line").attr("x1",125).attr("y1",40*i+20).attr("x2",20*i+125).attr("y2",40*i+20-20*(7-r)).attr("stroke","blue").attr("class",t)}),c.forEach(function(t,a){n.selectAll("text."+t).on("mouseover",function(){var t=l.d(this).attr("class");e.selectedFill({f1:t,f2:"none"}),n.selectAll("text").classed("hovered",!1),l.d(this).classed("hovered",!0),n.selectAll("text.col_"+t).classed("hovered",!0),n.selectAll("text.row_"+t).classed("hovered",!0),p.selectAll("line").classed("hovered",!1),p.selectAll("line."+t).classed("hovered",!0),d.selectAll("circle").classed("hovered",!1),d.selectAll("circle."+t).classed("hovered",!0)}).on("mouseout",function(){e.selectedFill({f1:"none",f2:"none"}),n.selectAll("text").classed("hovered",!1),p.selectAll("line").classed("hovered",!1),d.selectAll("circle").classed("hovered",!1)})}),s(1)};return i.a.createElement("div",{className:"triangle"},i.a.createElement("h3",null,"Filling filter"),i.a.createElement("svg",{ref:t,width:260,height:300}))};var u=function(){var e=i.a.createRef(),t=Object(a.useState)([]),r=Object(o.a)(t,2),c=r[0],s=r[1],u=Object(a.useState)([]),f=Object(o.a)(u,2),m=f[0],g=f[1],h=Object(a.useState)({f1:"none",f2:"none"}),v=Object(o.a)(h,2),b=v[0],_=v[1];Object(a.useEffect)(function(){l.a("https://docs.google.com/spreadsheets/d/e/2PACX-1vTT_w_1rgvRuiIkhgZ7GGjhWdxNTY2zuFEsuT7AtK80ryUlPZMN96ROjIljXTAewLEm6CClM5HwIiFv/pub?gid=0&single=true&output=csv").then(function(e){var t=[],n=l.g("%Y-%m-%d"),a=e.map(function(e,a){var i=""!=e["primary filling"]?e["primary filling"].replace(" ","_"):"None",r=""!=e["secondary filling"]?e["secondary filling"].replace(" ","_"):"None";return t.push(i),t.push(r),{id:a,name:e.Pie,date:n(e["Date served"]),alec:e["alec will eat it"],crust:e["one-crust"]&&!e["two crust"]?1:2,img:e[Image],notes:e.Notes,is_pie:e["Is this pie?"],recipe:e.Recipe,fill_1:i,fill_2:r}}),i=l.c().key(function(e){return e}).rollup(function(e){return e.length}).entries(t).sort(function(e,t){return l.b(e.value,t.value)}).slice(0,7).map(function(e){return e.key});a.forEach(function(e){e.mod_fill_1=i.includes(e.fill_1)?e.fill_1:"Other",e.mod_fill_2=i.includes(e.fill_2)?e.fill_2:"Other"}),s(a),g(t)})},[]),Object(a.useEffect)(function(){y(c)},[c]),Object(a.useEffect)(function(){"none"===b.f1?l.e("span.pie").classed("activeItem",!0).classed("unactiveItem",!1):(l.e("span.pie").classed("unactiveItem",!0),"none"===b.f2?l.e("span.pie."+b.f1).classed("unactiveItem",!1):l.e("span.pie").filter(function(e){return e.mod_fill_1===b.f1&&e.mod_fill_2===b.f2||e.mod_fill_1===b.f2&&e.mod_fill_2===b.f1||e.mod_fill_1===b.f1&&"None"===e.mod_fill_2&&b.f1===b.f2}).classed("unactiveItem",!1))});var y=function(t){var a=function(e){var t={};return e.keys().map(function(n,a){t[n.replace("./","")]=e(n)}),t}(n(14)),i=l.d(e.current),r=l.f("%Y %B"),c=l.c().key(function(e){return r(e.date)}).entries(t),o=i.selectAll("div.pies_in_month").data(c).enter().append("div").classed("pies_in_month",!0);if(o.append("div").classed("month_name",!0).html(function(e){var t=l.f("%B"),n=l.f("%Y"),a=l.g("%Y %B"),i="<span class='month_wrapper'><span class='month'>"+t(a(e.key))+"</span></span>";return"<span class='year year"+n(a(e.key))+"'>"+n(a(e.key))+"</span>"+i}),i.selectAll(".year2018").filter(function(e,t){return 0==t}).classed("visible",!0),i.selectAll(".year2019").filter(function(e,t){return 0==t}).classed("visible",!0),i.selectAll(".year2020").filter(function(e,t){return 0==t}).classed("visible",!0),i.select(".year2019").node()){var s=i.select(".year2019").node().parentNode.parentNode,d=i.select(".year2019").node().parentNode.parentNode.parentNode,u=document.createElement("div");u.className="line_breaker",d.insertBefore(u,s)}function f(e){if(e){for(var t=document.createDocumentFragment();e.firstChild;){var n=e.removeChild(e.firstChild);t.appendChild(n)}e.parentNode.replaceChild(t,e)}}o.append("div").classed("pies_list",!0).selectAll("span.pie").data(function(e){return e.values}).enter().append("span").classed("pie",!0).html(function(e,t,n){var i=a[e.name+".png"]?a[e.name+".png"]:p.a;e.pie_img=i;var r=l.f("%e");return l.g("%Y %B %e"),"<span class='"+C(e,n[t+1])+P(e,n[t-1])+"'>"+r(e.date)+"</span><img alt='"+e.name+"' src=\""+i+"\" width='88' height='88'>"}).attr("class",function(e,t,n){return"pie "+e.fill_1+" "+e.fill_2+" "+e.mod_fill_1+" "+e.mod_fill_2+" "+x(e.fill_1,e.fill_2)+C(e,n[t+1])}).on("mouseover",function(e){l.d("body").append("div").classed("tooltip",!0).html("<img  alt='"+e.name+"' src='"+e.pie_img+"' width='256' height='256'> <div class='details'>crust: "+e.crust+"<br>alec: "+e.alec+"<br>fill 1: "+e.fill_1+"<br>fill 2: "+e.fill_2+"<br></div>").style("left",l.d(this).node().getBoundingClientRect().left-88+"px").style("top",l.d(this).node().getBoundingClientRect().top+window.scrollY+150+"px")}).on("mouseout",function(e){l.d(".tooltip").remove()}),i.node().querySelectorAll(".pies_in_month").forEach(function(e){f(e)}),i.node().querySelectorAll(".pies_list").forEach(function(e){f(e)})},x=function(e,t){return e!==b.f1&&t!==b.f1||"none"!==b.f2?e===b.f1&&t===b.f2?(console.log(e,t,b)," activeItem "):" unactiveItem ":(console.log(e,t,b)," activeItem ")},C=function(e,t){if(t&&e.date.getTime()===t.__data__.date.getTime())return" wrapPie "},P=function(e,t){if(t&&e.date.getTime()===t.__data__.date.getTime())return" invisibleNumber "};return i.a.createElement("div",null,i.a.createElement("div",{className:"left_side"},i.a.createElement("div",{className:"sticky_top"},i.a.createElement("h1",null,"The Pie Chart"),i.a.createElement("h2",null,"The pies proudly eaten by the Stamen team"),i.a.createElement(d,{data:c,fills:m,selectedFill:function(e){console.log("selected fill: ",e),_(e)}})),i.a.createElement("div",{className:"unsticky"}),i.a.createElement("div",{className:"sticky_bottom"},i.a.createElement("div",{className:"footer"},"Made by ",i.a.createElement("a",{href:"https://kmpny.github.io"},"Kompany"),", ",i.a.createElement("a",{href:"https://docs.google.com/spreadsheets/d/1npXQKNySYcRpiwp3-Iug3ncmCUS9F813LoxZQzSbVLU/edit#gid=0"},"data")," collected by ",i.a.createElement("a",{href:"https://stamen.com"},"Stamen")))),i.a.createElement("div",{className:"right_side"},i.a.createElement("div",{className:"pies",ref:e})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.9ca829f6.chunk.js.map