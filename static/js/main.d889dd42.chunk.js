(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,n){e.exports=n.p+"static/media/no_image.e2626336.png"},,,function(e,t,n){e.exports=n(62)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){var a={"./Bird's Nest Pudding Pie.png":15,"./Blackberry.png":16,"./Blueberry Cherry.png":17,"./Blueberry Pear Crumble.png":18,"./Buttermilk.png":19,"./Captain Crunch.png":20,"./Carrot Meringue.png":21,"./Carrot.png":22,"./Cast Iron Apple Pie.png":23,"./Chez Panisse Lemon Meringe.png":24,"./Chocolate Avocado.png":25,"./Chocolate Peanut Butter.png":26,"./Chocolate Peanut Pie Mashup.png":27,"./Chocolate Peanut Tart.png":28,"./Coconut Cream.png":29,"./Coffee Chess.png":30,"./Corn Cardamom Custard.png":31,"./Crack Pie.png":32,"./Eggnog custard.png":33,"./Five berry pie.png":34,"./Freedom Pie.png":35,"./Gluten-free Blackberry.png":36,"./Key Lime Raspberry.png":37,"./Lemon Ice Box.png":38,"./Marie Calendar's Pot Pies.png":39,"./Mixed berry.png":40,"./Nectarine-Raspberry.png":41,"./Orange Meringue.png":42,"./Pear Ginger.png":43,"./Piecaken.png":44,"./Pumpkin Pecan.png":45,"./Raspberry Blueberry.png":46,"./Raw Pumpkin.png":47,"./Ruffled MIlk Pie.png":48,"./Salted Honey II.png":49,"./Salted Honey.png":50,"./Samoa II.png":51,"./Samoa.png":52,"./Shoofly.png":53,"./Strawberry Basil.png":54,"./Strawberry Rhubarb.png":55,"./Strawberry pie.png":56,"./Virginia Peanut Pie.png":57,"./Walgreens Pie.png":58,"./White Peach.png":59,"./Yellow Peach-1.png":60,"./Yellow Peach.png":61,"./no_image.png":3};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=14},function(e,t,n){e.exports=n.p+"static/media/Bird's Nest Pudding Pie.02a83a39.png"},function(e,t,n){e.exports=n.p+"static/media/Blackberry.da58b568.png"},function(e,t,n){e.exports=n.p+"static/media/Blueberry Cherry.84e089d5.png"},function(e,t,n){e.exports=n.p+"static/media/Blueberry Pear Crumble.0a265269.png"},function(e,t,n){e.exports=n.p+"static/media/Buttermilk.6f3a6c41.png"},function(e,t,n){e.exports=n.p+"static/media/Captain Crunch.5b69057d.png"},function(e,t,n){e.exports=n.p+"static/media/Carrot Meringue.1680a56b.png"},function(e,t,n){e.exports=n.p+"static/media/Carrot.d55b1dc5.png"},function(e,t,n){e.exports=n.p+"static/media/Cast Iron Apple Pie.975a5643.png"},function(e,t,n){e.exports=n.p+"static/media/Chez Panisse Lemon Meringe.0d211018.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Avocado.197ef43b.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Peanut Butter.90e3ac11.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Peanut Pie Mashup.beae2711.png"},function(e,t,n){e.exports=n.p+"static/media/Chocolate Peanut Tart.862e8d7a.png"},function(e,t,n){e.exports=n.p+"static/media/Coconut Cream.32ccf3b3.png"},function(e,t,n){e.exports=n.p+"static/media/Coffee Chess.8fa3e68a.png"},function(e,t,n){e.exports=n.p+"static/media/Corn Cardamom Custard.ce2a09c8.png"},function(e,t,n){e.exports=n.p+"static/media/Crack Pie.97cb328b.png"},function(e,t,n){e.exports=n.p+"static/media/Eggnog custard.e9bf9636.png"},function(e,t,n){e.exports=n.p+"static/media/Five berry pie.39c2ae2c.png"},function(e,t,n){e.exports=n.p+"static/media/Freedom Pie.f33fcbba.png"},function(e,t,n){e.exports=n.p+"static/media/Gluten-free Blackberry.12c8028a.png"},function(e,t,n){e.exports=n.p+"static/media/Key Lime Raspberry.8c202eee.png"},function(e,t,n){e.exports=n.p+"static/media/Lemon Ice Box.a7aad4f6.png"},function(e,t,n){e.exports=n.p+"static/media/Marie Calendar's Pot Pies.f64636af.png"},function(e,t,n){e.exports=n.p+"static/media/Mixed berry.5f32e9de.png"},function(e,t,n){e.exports=n.p+"static/media/Nectarine-Raspberry.9f1d4643.png"},function(e,t,n){e.exports=n.p+"static/media/Orange Meringue.ad7f7ef0.png"},function(e,t,n){e.exports=n.p+"static/media/Pear Ginger.d204c8c0.png"},function(e,t,n){e.exports=n.p+"static/media/Piecaken.c567b9e2.png"},function(e,t,n){e.exports=n.p+"static/media/Pumpkin Pecan.e76dead1.png"},function(e,t,n){e.exports=n.p+"static/media/Raspberry Blueberry.6bb14ce7.png"},function(e,t,n){e.exports=n.p+"static/media/Raw Pumpkin.2a6e40c8.png"},function(e,t,n){e.exports=n.p+"static/media/Ruffled MIlk Pie.019b9e89.png"},function(e,t,n){e.exports=n.p+"static/media/Salted Honey II.aca6aefc.png"},function(e,t,n){e.exports=n.p+"static/media/Salted Honey.c9b0a076.png"},function(e,t,n){e.exports=n.p+"static/media/Samoa II.dc5320fe.png"},function(e,t,n){e.exports=n.p+"static/media/Samoa.dc5320fe.png"},function(e,t,n){e.exports=n.p+"static/media/Shoofly.4dd45894.png"},function(e,t,n){e.exports=n.p+"static/media/Strawberry Basil.9182bc67.png"},function(e,t,n){e.exports=n.p+"static/media/Strawberry Rhubarb.4cb32af9.png"},function(e,t,n){e.exports=n.p+"static/media/Strawberry pie.79788278.png"},function(e,t,n){e.exports=n.p+"static/media/Virginia Peanut Pie.3a282b17.png"},function(e,t,n){e.exports=n.p+"static/media/Walgreens Pie.05611736.png"},function(e,t,n){e.exports=n.p+"static/media/White Peach.e7e43d5d.png"},function(e,t,n){e.exports=n.p+"static/media/Yellow Peach-1.2e324eb6.png"},function(e,t,n){e.exports=n.p+"static/media/Yellow Peach.8688657d.png"},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(5),c=n.n(r),l=(n(12),n(2)),s=n(1),o=(n(13),n(3)),p=n.n(o);var d=function(e){var t=i.a.createRef(),n=Object(a.useState)(0),r=Object(l.a)(n,2),c=r[0],o=r[1];Object(a.useEffect)(function(){console.log(e.data.length,e.fills.length,c,"hook"),0!=e.data.length&&0!=e.fills.length&&0==c&&p()});var p=function(){var n=s.d(t.current);console.log(n,t);var a=e.data,i=e.fills,r=s.c().key(function(e){return e}).rollup(function(e){return e.length}).entries(i).sort(function(e,t){return s.b(e.value,t.value)}),c=r.slice(0,7).map(function(e){return e.key});r.slice(8).map(function(e){return e.key}),a.forEach(function(e){e.mod_fill_1=c.includes(e.fill_1)?e.fill_1:"Other",e.mod_fill_2=c.includes(e.fill_2)?e.fill_2:"Other"}),(c=c.filter(function(e){return"None"!=e})).push("Other");var l=[],p=n.append("g").attr("class","lines"),d=n.append("g").attr("class","texts");c.forEach(function(t,i){var r=0;n.append("text").attr("x",0).attr("y",31*i+25).text(t).classed(t,!0);for(var o=function(){var n=c[u];r++;var o=a.filter(function(e){return e.mod_fill_1==t&&e.mod_fill_2==n||e.mod_fill_1==t&&"None"==e.mod_fill_2&&t==n}),p=a.filter(function(e){return e.mod_fill_2==t&&e.mod_fill_1==n&&t!=n});d.append("circle").attr("r",function(e){return o.length+p.length>0?9:0}).attr("cx",15.5*r+105+10).attr("cy",15.5*i+15.5*u+25-4.5).classed(t,!0).classed(n,!0).on("mouseover",function(){s.d(this).classed("hovered",!0),e.selectedFill({f1:t,f2:n})}).on("mouseout",function(){s.d(this).classed("hovered",!1),e.selectedFill({f1:"none",f2:"none"})}),d.append("text").attr("x",15.5*r+105+10).attr("y",15.5*i+15.5*u+25+1.5).text(function(){return o.length+p.length>0?o.length+p.length:""}).classed("row_"+t,!0).classed("col_"+n,!0).attr("pointer-events","none"),l.push({fill_1:t,fill_2:n,count:o.length+p.length})},u=i;u<=c.length-1;u++)o();p.append("line").attr("x1",130).attr("y1",31*i+15.5+5).attr("x2",15.5*r+130-15.5).attr("y2",15.5*i+15.5*u+4).attr("class",t),p.append("line").attr("x1",130).attr("y1",31*i+15.5+5).attr("x2",15.5*i+130).attr("y2",31*i-15.5*(7-r)+20).attr("class",t)}),c.forEach(function(t,a){n.selectAll("text."+t).on("mouseover",function(){var t=s.d(this).attr("class");e.selectedFill({f1:t,f2:"none"}),n.selectAll("text").classed("hovered",!1),s.d(this).classed("hovered",!0),n.selectAll("text.col_"+t).classed("hovered",!0),n.selectAll("text.row_"+t).classed("hovered",!0),p.selectAll("line").classed("hovered",!1),p.selectAll("line."+t).classed("hovered",!0),d.selectAll("circle").classed("hovered",!1),d.selectAll("circle."+t).classed("hovered",!0)}).on("mouseout",function(){e.selectedFill({f1:"none",f2:"none"}),n.selectAll("text").classed("hovered",!1),p.selectAll("line").classed("hovered",!1),d.selectAll("circle").classed("hovered",!1)})}),o(1)};return i.a.createElement("div",{className:"triangle"},i.a.createElement("h3",null,"Filling filter"),i.a.createElement("svg",{ref:t,width:260,height:300}))};var u=function(){var e=i.a.createRef(),t=Object(a.useState)([]),r=Object(l.a)(t,2),c=r[0],o=r[1],u=Object(a.useState)([]),f=Object(l.a)(u,2),m=f[0],g=f[1],h=Object(a.useState)({f1:"none",f2:"none"}),v=Object(l.a)(h,2),_=v[0],b=v[1];Object(a.useEffect)(function(){s.a("https://docs.google.com/spreadsheets/d/e/2PACX-1vTT_w_1rgvRuiIkhgZ7GGjhWdxNTY2zuFEsuT7AtK80ryUlPZMN96ROjIljXTAewLEm6CClM5HwIiFv/pub?gid=0&single=true&output=csv").then(function(e){var t=[],n=s.g("%Y-%m-%d"),a=e.map(function(e,a){var i=""!=e["primary filling"]?e["primary filling"].replace(" ","_"):"None",r=""!=e["secondary filling"]?e["secondary filling"].replace(" ","_"):"None";return t.push(i),t.push(r),{id:a,name:e.Pie,date:n(e["Date served"]),alec:e["alec will eat it"],crust:e["one-crust"]&&!e["two crust"]?1:2,img:e[Image],notes:e.Notes,is_pie:e["Is this pie?"],recipe:e.Recipe,fill_1:i,fill_2:r}}),i=s.c().key(function(e){return e}).rollup(function(e){return e.length}).entries(t).sort(function(e,t){return s.b(e.value,t.value)}).slice(0,7).map(function(e){return e.key});a.forEach(function(e){e.mod_fill_1=i.includes(e.fill_1)?e.fill_1:"Other",e.mod_fill_2=i.includes(e.fill_2)?e.fill_2:"Other"}),o(a),g(t)})},[]),Object(a.useEffect)(function(){y(c)},[c]),Object(a.useEffect)(function(){"none"===_.f1?s.e("span.pie").classed("activeItem",!0).classed("unactiveItem",!1):(s.e("span.pie").classed("unactiveItem",!0),"none"===_.f2?s.e("span.pie."+_.f1).classed("unactiveItem",!1):s.e("span.pie").filter(function(e){return e.mod_fill_1===_.f1&&e.mod_fill_2===_.f2||e.mod_fill_1===_.f2&&e.mod_fill_2===_.f1||e.mod_fill_1===_.f1&&"None"===e.mod_fill_2&&_.f1===_.f2}).classed("unactiveItem",!1))});var y=function(t){var a=function(e){var t={};return e.keys().map(function(n,a){t[n.replace("./","")]=e(n)}),t}(n(14)),i=s.d(e.current),r=s.f("%Y %B"),c=s.c().key(function(e){return r(e.date)}).entries(t),l=i.selectAll("div.pies_in_month").data(c).enter().append("div").classed("pies_in_month",!0);if(l.append("div").classed("month_name",!0).html(function(e){var t=s.f("%B"),n=s.f("%Y"),a=s.g("%Y %B"),i="<span class='month_wrapper'><span class='month'>"+t(a(e.key))+"</span></span>";return"<span class='year year"+n(a(e.key))+"'>"+n(a(e.key))+"</span>"+i}),i.selectAll(".year2018").filter(function(e,t){return 0==t}).classed("visible",!0),i.selectAll(".year2019").filter(function(e,t){return 0==t}).classed("visible",!0),i.selectAll(".year2020").filter(function(e,t){return 0==t}).classed("visible",!0),i.select(".year2019").node()){var o=i.select(".year2019").node().parentNode.parentNode,d=i.select(".year2019").node().parentNode.parentNode.parentNode,u=document.createElement("div");u.className="line_breaker",d.insertBefore(u,o)}function f(e){if(e){for(var t=document.createDocumentFragment();e.firstChild;){var n=e.removeChild(e.firstChild);t.appendChild(n)}e.parentNode.replaceChild(t,e)}}l.append("div").classed("pies_list",!0).selectAll("span.pie").data(function(e){return e.values}).enter().append("span").classed("pie",!0).html(function(e,t,n){var i=a[e.name+".png"]?a[e.name+".png"]:p.a;e.pie_img=i;var r=s.f("%e"),c=(s.g("%Y %B %e"),"<div class='details'>"+function(e){var t=s.f("%A, %B %e, %Y");return"<div class='picture'><img  alt='"+e.name+"' src=\""+e.pie_img+"\" width='256' height='256'> </div><div class='text'><div class='date'>"+t(e.date)+"</div>"+(e.recipe.match(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi)?"<div class='name'><a href='"+e.recipe+"'>"+e.name+"</a></div>":"<div class='name'>"+e.name+"</div>")+"<div class='fill'>"+e.fill_1+("None"!=e.fill_2&&e.fill_1!=e.fill_2?" and "+e.fill_2:"")+", "+(1===e.crust?"one crust":"two crusts")+"</div>"+(e.notes?"<div class='notes'>"+e.notes+"</div>":"")+"<div class='is_pie'> \u2014 Is this pie? <br> \u2014 "+e.is_pie+"</div><div class='alec'> \u2014 Will Alec eat it? <br> \u2014 "+e.alec+"</div></div>"}(e)+"</div>");return"<span class='number "+w(e,n[t+1])+P(e,n[t-1])+"'>"+r(e.date)+"</span><img alt='"+e.name+"' src=\""+i+"\" width='88' height='88'>"+c}).attr("class",function(e,t,n){return"pie "+e.fill_1+" "+e.fill_2+" "+e.mod_fill_1+" "+e.mod_fill_2+" "+x(e.fill_1,e.fill_2)+w(e,n[t+1])}),i.node().querySelectorAll(".pies_in_month").forEach(function(e){f(e)}),i.node().querySelectorAll(".pies_list").forEach(function(e){f(e)})},x=function(e,t){return e!==_.f1&&t!==_.f1||"none"!==_.f2?e===_.f1&&t===_.f2?(console.log(e,t,_)," activeItem "):" unactiveItem ":(console.log(e,t,_)," activeItem ")},w=function(e,t){if(t&&e.date.getTime()===t.__data__.date.getTime())return" wrapPie "},P=function(e,t){if(t&&e.date.getTime()===t.__data__.date.getTime())return" invisibleNumber "};return i.a.createElement("div",null,i.a.createElement("div",{className:"left_side"},i.a.createElement("div",{className:"sticky_top"},i.a.createElement("h1",null,"The Pie Chart"),i.a.createElement("h2",null,"The pies proudly eaten by the Stamen team"),i.a.createElement(d,{data:c,fills:m,selectedFill:function(e){b(e)}})),i.a.createElement("div",{className:"unsticky"}),i.a.createElement("div",{className:"sticky_bottom"},i.a.createElement("div",{className:"footer"},"Made by ",i.a.createElement("a",{href:"https://kmpny.github.io"},"Kompany"),", ",i.a.createElement("a",{href:"https://docs.google.com/spreadsheets/d/1npXQKNySYcRpiwp3-Iug3ncmCUS9F813LoxZQzSbVLU/edit#gid=0"},"data")," collected by ",i.a.createElement("a",{href:"https://stamen.com"},"Stamen")))),i.a.createElement("div",{className:"right_side"},i.a.createElement("div",{className:"pies",ref:e}),i.a.createElement("div",{className:"bottom"},"Well done! Keep going!")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.d889dd42.chunk.js.map